
<section class="py-5 m-4" style="background-color: #f8f9fa;">
  <div class="d-flex gap-2 mb-3">
    <input
      type="text"
      class="form-control w-80" 
      placeholder="Search for a movie, tv show..."
      [(ngModel)]="query"
    />
    <button class="btn btn-warning fw-semibold" type="button" (click)="SearchMovies()">Search</button>
  </div>

  <div class="d-flex gap-3 mb-3">
    <select class="form-select w-25" [(ngModel)]="selectedGenre" (change)="onFilterChange()">
      <option [ngValue]="null">All Genres</option>
      <option *ngFor="let g of genres" [ngValue]="g.id">{{ g.name }}</option>
    </select>

    <select class="form-select w-25" [(ngModel)]="sortBy" (change)="onFilterChange()">
      <option value="popularity.desc">Popularity</option>
      <option value="release_date.desc">Release Date</option>
      <option value="vote_average.desc">Top Rated</option>
    </select>
  </div>

  <div class="row mt-4" *ngIf="results.length > 0">
    <div class="col-md-8">
      <h6 class="fw-bold">
        Search Results
        <span *ngIf="query">for "{{ query }}"</span>
      </h6>
    </div>
  </div>

  @if(results.length==0) {

<div class="d-flex justify-content-center">
  <div class="spinner-border" role="status">
    <span class="visually-hidden">Loading...</span>
  </div>
</div>
  }
  <app-card-components [movies]="results"></app-card-components>
</section>
<app-footer
  [totalPages]="totalPages"
  [currentPage]="currentPage"
  (pageChange)="onPageChange($event)">
</app-footer>
